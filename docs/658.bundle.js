"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[658],{552:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(861),r=n(942),o=n(152),c=n(757),s=n.n(c),l=n(294),i=n(823),m=n(935);const u=function(e){var t=e.isOpen,n=e.onClose,a=e.children;return t?m.createPortal(l.createElement("div",{className:"Modal"},l.createElement("div",{className:"Modal__container"},l.createElement("button",{onClick:n,className:"Modal__close-button"},"X"),a)),document.getElementById("modal")):null};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const f=function(e){var t=e.isOpen,n=e.onClose,r=e.formType,c=e.id,m=void 0===c?"":c,p=(0,l.useState)({nickname:"",content:"",nick:"",comment:""}),f=(0,o.Z)(p,2),b=f[0],h=f[1],v=function(){var e=(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(b.nickname.length>=5&&b.content.length>=10||b.nick.length>=5&&b.comment.length>=10)){e.next=10;break}if("session"!==r){e.next=6;break}return e.next=4,(0,i.O9)(b);case 4:e.next=8;break;case 6:return e.next=8,(0,i.O9)(b,"/session/".concat(m));case 8:e.next=11;break;case 10:alert("The nickname must have at least 5 characters and the content 10.");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.createElement(u,{isOpen:t,onClose:n},l.createElement("div",null,l.createElement("div",{className:"mb-3"},l.createElement("label",{htmlFor:"exampleFormControlInput1",className:"form-label"},"session"===r?"nickname":"nick"),l.createElement("input",{onChange:function(e){var t=e.target.value;h(d(d({},b),{},"session"===r?{nickname:t}:{nick:t}))},type:"email",className:"form-control",id:"exampleFormControlInput1",placeholder:"nickname"})),l.createElement("div",{className:"mb-3"},l.createElement("label",{htmlFor:"exampleFormControlTextarea1",className:"form-label"},"comment"),l.createElement("textarea",{onChange:function(e){var t=e.target.value;h(d(d({},b),{},"session"===r?{content:t}:{comment:t}))},className:"form-control",id:"exampleFormControlTextarea1",rows:"3"})),l.createElement("button",{onClick:v,type:"button",className:"btn btn-primary mr-2"},"Save"),l.createElement("button",{onClick:n,type:"button",className:"btn btn-dark"},"Cancel")))}},823:(e,t,n)=>{n.d(t,{XD:()=>l,yK:()=>i,O9:()=>m});var a=n(861),r=n(152),o=n(757),c=n.n(o),s=n(294),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,s.useState)(),n=(0,r.Z)(t,2),o=n[0],l=n[1];return(0,s.useEffect)((function(){fetch(e).then(function(){var e=(0,a.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=6;break}return e.t0=l,e.next=4,t.json();case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),o},i=function(e,t){var n="https://ale31jofirst.herokuapp.com/api/reaction/"+e,a={reaction:t},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},o=new Request(n,r);fetch(o).then((function(e){e.ok&&console.log("ya")})).catch((function(e){console.log(e)}))},m=function(){var e=(0,a.Z)(c().mark((function e(t){var n,a,r,o,s=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"",a="https://ale31jofirst.herokuapp.com/api",r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},o=new Request(a+n,r),e.next=6,fetch(o).then((function(e){if(!e.ok)return alert("There was an error. Please try again.");""===n?alert("Session saved."):alert("Comment saved.")}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},658:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(152),r=n(294),o=n(552),c=n(711),s=n(823);const l=function(e){var t=e.session,n=void 0===t?{}:t,o=n._id,l=n.content,i=n.nickname,m=n.reactions,u=(0,r.useState)(m[1].number),p=(0,a.Z)(u,2),d=p[0],f=p[1],b=(0,r.useState)(m[2].number),h=(0,a.Z)(b,2),v=h[0],k=h[1],y=(0,r.useState)(m[0].number),g=(0,a.Z)(y,2),E=g[0],O=g[1];return r.createElement("div",{className:"card text-white bg-primary mb-2",style:{maxWidth:"18rem"}},r.createElement("div",{className:"card-header"},i||"nickname"),r.createElement("div",{className:"card-body"},r.createElement("p",{className:"card-text"},l||""),r.createElement("div",{className:"card-title"},r.createElement("button",{onClick:function(){(0,s.yK)(o,"happy"),k(v+1)},className:"badge rounded-pill bg-primary"},"Happy  ".concat(v)),r.createElement("button",{onClick:function(){(0,s.yK)(o,"sad"),f(d+1)},className:"badge rounded-pill bg-danger"},"Sad  ".concat(d)),r.createElement("button",{onClick:function(){(0,s.yK)(o,"care"),O(E+1)},className:"badge rounded-pill bg-info text-dark"},"Care  ".concat(E)),r.createElement(c.rU,{to:"/post-something-frontend/comments/".concat(o),className:"badge bg-dark"},"comment"))))},i=function(){var e=(0,r.useState)(!1),t=(0,a.Z)(e,2),n=t[0],c=t[1],i=(0,s.XD)("https://ale31jofirst.herokuapp.com/api");return i?r.createElement("div",{className:"container-fluid"},r.createElement("div",{className:"row"},i.sessions.reverse().map((function(e){return r.createElement(l,{key:e._id,session:e})}))),r.createElement("button",{className:"fixed-bottom btn btn-secondary btn-lg",onClick:function(){c(!0)}},"New session"),r.createElement(o.Z,{formType:"session",isOpen:n,onClose:function(){c(!1)}})):r.createElement("h1",null,"Loading")}}}]);